<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generate Invoice</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
    * {
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    
    body {
      margin: 0;
      background: #ffffff;
      color: #2b2b2b;
    }
    
    .header {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 26px;
      font-size: 18px;
      font-weight: 600;
      color: #ffffff;
      background-color: #6B2737;
    }
    
    .container {
      padding: 38px;
    }
    
    label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 6px;
    }
    
    input,
    select {
      width: 100%;
      padding: 12px;
      border-radius: 12px;
      border: 1px solid #e5dada;
      background: #f7f3f4;
      font-size: 14px;
      margin-bottom: 14px;
    }
    
    .row {
      display: block;
      gap: 12px;
    }
    
    .row > div {
      flex: 1;
    }
    
    .add-item {
      border: 1.5px dashed #e5dada;
      padding: 14px;
      text-align: center;
      border-radius: 12px;
      font-size: 14px;
      color: #6B2737;
      margin: 12px 0 20px;
      cursor: pointer;
    }
    
    .item {
      border: 1px solid #e5dada;
      border-radius: 12px;
      padding: 12px;
      margin-bottom: 12px;
      background: #fff;
    }
    
    .footer {
      padding: 16px;
      padding-left: 38px;
      padding-right: 38px;
    }
    
    .save-btn {
      width: 100%;
      padding: 16px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #6B2737, #8C3A4F);
      color: #fff;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
    }
    </style>
    
</head>
<body>

<div class="header">Generate Invoice</div>

<div class="container">

  <label>Company Name</label>
  <input id="companyName" type="text">

  <label>Company Address</label>
  <input id="companyAddress" type="text">

  <label>Client Name</label>
  <input id="clientName" type="text">

  <label>Client Address</label>
  <input id="clientAddress" type="text">

  <div class="row">
    <div>
      <label>Invoice Number</label>
      <input id="invoiceNumber" type="text" placeholder="INV-001">
    </div>
    <div>
      <label>Issue Date</label>
      <input id="issueDate" type="date">
    </div>
    <div>
      <label>Due Date</label>
      <input id="dueDate" type="date">
    </div>
  </div>

  <label>Status</label>
  <select id="status">
    <option>Draft</option>
    <option>Sent</option>
    <option>Paid</option>
    <option>Overdue</option>
    <option>Cancelled</option>
  </select>

  <div id="items"></div>
  <div class="add-item" onclick="addItem()">+ Add Item</div>

  <label>Select VAT %</label>
  <select id="vat" onchange="calculateTotal()">
    <option value="20">20%</option>
    <option value="15">15%</option>
    <option value="10">5%</option>
    <option value="0">0%</option>
  </select>

  <label>Payment Terms</label>
  <input id="paymentTerms" type="text" placeholder="Net 30">

  <label>Bank Details / Payment Method</label>
  <input id="bankDetails" type="text" placeholder="Bank info or method">

  <label>Note (Optional)</label>
  <input id="note" type="text" placeholder="Any additional note">

</div>

<div class="footer">
  <button class="save-btn" onclick="generatePDF()">Save Invoice PDF</button>
</div>

<script>
let itemCount = 0;

function addItem() {
  itemCount++;
  const html = `
    <div class="item">
      <label>Item ${itemCount}</label>
      <input type="text" class="item-name" placeholder="Item name">
      <input type="text" class="item-desc" placeholder="Description (optional)">
      <div class="row">
        
      <label>Quantity</label>
        <div><input type="number" class="item-qty" placeholder="Quantity" value="1" oninput="calculateTotal()"></div>
        
      <label>Unit Price</label>
        <div><input type="number" class="item-price" placeholder="Unit Price" value="0" oninput="calculateTotal()"></div>
        
      <label>Total Amount in $</label>
        <div><input type="number" class="item-total" placeholder="Line Total" value="0" readonly></div>
      </div>
    </div>
  `;
  document.getElementById("items").insertAdjacentHTML("beforeend", html);
}

function calculateTotal() {
  document.querySelectorAll(".item").forEach(item => {
    const qty = Number(item.querySelector(".item-qty").value || 0);
    const price = Number(item.querySelector(".item-price").value || 0);
    item.querySelector(".item-total").value = (qty * price).toFixed(2);
  });

  let subtotal = 0;
  document.querySelectorAll(".item-total").forEach(input => {
    subtotal += Number(input.value || 0);
  });

  return subtotal;
}

function generatePDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  let y = 20;

  doc.setFontSize(18);
  doc.text("INVOICE", 14, y);

  y += 10;
  doc.setFontSize(11);
  doc.text(`Invoice #: ${document.getElementById("invoiceNumber").value}`, 14, y);
  doc.text(`Issue Date: ${document.getElementById("issueDate").value}`, 120, y);
  y += 6;
  doc.text(`Due Date: ${document.getElementById("dueDate").value}`, 120, y);
  doc.text(`Status: ${document.getElementById("status").value}`, 14, y);

  y += 10;
  doc.setFontSize(12);
  doc.text("From:", 14, y);
  doc.text("To:", 120, y);
  y += 6;
  doc.setFontSize(11);
  doc.text(`${document.getElementById("companyName").value}`, 14, y);
  doc.text(`${document.getElementById("clientName").value}`, 120, y);
  y += 6;
  doc.text(`${document.getElementById("companyAddress").value}`, 14, y);
  doc.text(`${document.getElementById("clientAddress").value}`, 120, y);

  y += 10;
  doc.setFontSize(12);
  doc.text("Items", 14, y);
  y += 6;

  doc.setFontSize(11);
  doc.text("Item", 14, y);
  doc.text("Description", 64, y);
  doc.text("Qty", 120, y);
  doc.text("Unit", 140, y);
  doc.text("Total", 170, y);
  y += 4;
  doc.line(14, y, 195, y);
  y += 6;

  document.querySelectorAll(".item").forEach(item => {
    const name = item.querySelector(".item-name").value;
    const desc = item.querySelector(".item-desc").value;
    const qty = item.querySelector(".item-qty").value;
    const price = item.querySelector(".item-price").value;
    const total = item.querySelector(".item-total").value;

    doc.text(name, 14, y);
    doc.text(desc, 64, y);
    doc.text(qty, 120, y);
    doc.text(price, 140, y);
    doc.text(total, 170, y);
    y += 6;
  });

  y += 4;
  doc.line(14, y, 195, y);
  y += 6;

  const subtotal = calculateTotal();
  const vatPercent = Number(document.getElementById("vat").value);
  const vatAmount = (subtotal * vatPercent / 100).toFixed(2);
  const totalAmount = (subtotal + Number(vatAmount)).toFixed(2);

  doc.text(`Subtotal: $${subtotal.toFixed(2)}`, 140, y);
  y += 6;
  doc.text(`VAT (${vatPercent}%): $${vatAmount}`, 140, y);
  y += 6;
  doc.setFontSize(12);
  doc.text(`Total: $${totalAmount}`, 140, y);

  y += 10;
  doc.setFontSize(11);
  doc.text(`Payment Terms: ${document.getElementById("paymentTerms").value}`, 14, y);
  y += 6;
  doc.text(`Bank / Payment: ${document.getElementById("bankDetails").value}`, 14, y);

  const note = document.getElementById("note").value;
  if(note){
    y += 10;
    doc.text(`Note: ${note}`, 14, y);
  }

  doc.save("invoice.pdf");
}

addItem();
</script>
</body>
</html>
